<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Traits | Scala Tour</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="dcapwell">
        <meta name="description" content="My location for adding scala findings">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./Partial Function.html" />
        
        
        <link rel="prev" href="./Language.html" />
        

        <meta property="og:title" content="Traits | Scala Tour">
        <meta property="og:site_name" content="Scala Tour">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/dcapwell">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="gitbook/style.css">
        


        
    <div class="book" data-github="dcapwell/scala-tour" data-level="1.1" data-basepath="." data-revision="1404967423734">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/dcapwell/scala-tour" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/dcapwell/scala-tour/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/dcapwell/scala-tour/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Scala Tour</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/dcapwell" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/dcapwell/scala-tour/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/dcapwell/scala-tour/edit/master/Traits.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="Language.html">
                
                <a href="./Language.html">
                    <i class="fa fa-check"></i> <b>1.</b> Language
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="Traits.html">
                            
                            <a href="./Traits.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Traits
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="Partial Function.html">
                            
                            <a href="./Partial Function.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Partial Function
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="Types.html">
                
                <a href="./Types.html">
                    <i class="fa fa-check"></i> <b>2.</b> Types
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="Variance.html">
                            
                            <a href="./Variance.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Variance
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="Value Classes.html">
                            
                            <a href="./Value Classes.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Value Classes
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="F-Bounded Type.html">
                            
                            <a href="./F-Bounded Type.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> F-Bounded Type
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="Type Classes.html">
                            
                            <a href="./Type Classes.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Type Classes
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="Higher Kind.html">
                            
                            <a href="./Higher Kind.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Higher Kind
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="Path Dependent Types.html">
                            
                            <a href="./Path Dependent Types.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> Path Dependent Types
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.7" data-path="Phantom Type.html">
                            
                            <a href="./Phantom Type.html">
                                <i class="fa fa-check"></i> <b>2.7.</b> Phantom Type
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.8" data-path="Structural Types.html">
                            
                            <a href="./Structural Types.html">
                                <i class="fa fa-check"></i> <b>2.8.</b> Structural Types
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.9" data-path="Union and Intersection types.html">
                            
                            <a href="./Union and Intersection types.html">
                                <i class="fa fa-check"></i> <b>2.9.</b> Union and Intersection types
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="Patterns.html">
                
                <a href="./Patterns.html">
                    <i class="fa fa-check"></i> <b>3.</b> Patterns
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="Cake.html">
                            
                            <a href="./Cake.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Cake
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="Monads and Monoids.html">
                
                <a href="./Monads and Monoids.html">
                    <i class="fa fa-check"></i> <b>4.</b> Monads and Monoids
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="Functor.html">
                            
                            <a href="./Functor.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Functor
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="Applicative Functor.html">
                            
                            <a href="./Applicative Functor.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Applicative Functor
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="Scalaz.html">
                
                <a href="./Scalaz.html">
                    <i class="fa fa-check"></i> <b>5.</b> Scalaz
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="Utils.html">
                            
                            <a href="./Utils.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Utils
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="Tag Types.html">
                            
                            <a href="./Tag Types.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Tag Types
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="Memoization.html">
                            
                            <a href="./Memoization.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Memoization
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="Failure.html">
                
                <a href="./Failure.html">
                    <i class="fa fa-check"></i> <b>6.</b> Failure
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="6.1" data-path="Collections.html">
                            
                            <a href="./Collections.html">
                                <i class="fa fa-check"></i> <b>6.1.</b> Collections
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.2" data-path="Object Init.html">
                            
                            <a href="./Object Init.html">
                                <i class="fa fa-check"></i> <b>6.2.</b> Object Init
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.3" data-path="Implicit.html">
                            
                            <a href="./Implicit.html">
                                <i class="fa fa-check"></i> <b>6.3.</b> Implicit
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="7" data-path="macros/README.html">
                
                <a href="./macros/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> Macros
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="macros/macro_types.html">
                            
                            <a href="./macros/macro_types.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Macro Types
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.2" data-path="macros/macro_basics.html">
                            
                            <a href="./macros/macro_basics.html">
                                <i class="fa fa-check"></i> <b>7.2.</b> Macro Basics
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.3" data-path="macros/context.html">
                            
                            <a href="./macros/context.html">
                                <i class="fa fa-check"></i> <b>7.3.</b> Context
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.4" data-path="macros/fun_with_println.html">
                            
                            <a href="./macros/fun_with_println.html">
                                <i class="fa fa-check"></i> <b>7.4.</b> Fun with println
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.5" data-path="macros/scala_version_differences.html">
                            
                            <a href="./macros/scala_version_differences.html">
                                <i class="fa fa-check"></i> <b>7.5.</b> Scala Version Differences
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.6" data-path="macros/quasiquotes.html">
                            
                            <a href="./macros/quasiquotes.html">
                                <i class="fa fa-check"></i> <b>7.6.</b> Quasiquotes
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.7" data-path="macros/trees.html">
                            
                            <a href="./macros/trees.html">
                                <i class="fa fa-check"></i> <b>7.7.</b> Trees
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.8" data-path="macros/tree_lens.html">
                            
                            <a href="./macros/tree_lens.html">
                                <i class="fa fa-check"></i> <b>7.8.</b> Tree Lens
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="References.html">
                
                <a href="./References.html">
                    <i class="fa fa-check"></i> <b>8.</b> References
                </a>
                
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 5.555555555555555%;min-width: 2.7777777777777777%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./Language.html" title="Language" class="chapter done new-chapter" data-progress="1" style="left: 2.7777777777777777%;"></a>
    
        <a href="./Traits.html" title="Traits" class="chapter done " data-progress="1.1" style="left: 5.555555555555555%;"></a>
    
        <a href="./Partial Function.html" title="Partial Function" class="chapter  " data-progress="1.2" style="left: 8.333333333333334%;"></a>
    
        <a href="./Types.html" title="Types" class="chapter  new-chapter" data-progress="2" style="left: 11.11111111111111%;"></a>
    
        <a href="./Variance.html" title="Variance" class="chapter  " data-progress="2.1" style="left: 13.88888888888889%;"></a>
    
        <a href="./Value Classes.html" title="Value Classes" class="chapter  " data-progress="2.2" style="left: 16.666666666666668%;"></a>
    
        <a href="./F-Bounded Type.html" title="F-Bounded Type" class="chapter  " data-progress="2.3" style="left: 19.444444444444443%;"></a>
    
        <a href="./Type Classes.html" title="Type Classes" class="chapter  " data-progress="2.4" style="left: 22.22222222222222%;"></a>
    
        <a href="./Higher Kind.html" title="Higher Kind" class="chapter  " data-progress="2.5" style="left: 25%;"></a>
    
        <a href="./Path Dependent Types.html" title="Path Dependent Types" class="chapter  " data-progress="2.6" style="left: 27.77777777777778%;"></a>
    
        <a href="./Phantom Type.html" title="Phantom Type" class="chapter  " data-progress="2.7" style="left: 30.555555555555557%;"></a>
    
        <a href="./Structural Types.html" title="Structural Types" class="chapter  " data-progress="2.8" style="left: 33.333333333333336%;"></a>
    
        <a href="./Union and Intersection types.html" title="Union and Intersection types" class="chapter  " data-progress="2.9" style="left: 36.111111111111114%;"></a>
    
        <a href="./Patterns.html" title="Patterns" class="chapter  new-chapter" data-progress="3" style="left: 38.888888888888886%;"></a>
    
        <a href="./Cake.html" title="Cake" class="chapter  " data-progress="3.1" style="left: 41.666666666666664%;"></a>
    
        <a href="./Monads and Monoids.html" title="Monads and Monoids" class="chapter  new-chapter" data-progress="4" style="left: 44.44444444444444%;"></a>
    
        <a href="./Functor.html" title="Functor" class="chapter  " data-progress="4.1" style="left: 47.22222222222222%;"></a>
    
        <a href="./Applicative Functor.html" title="Applicative Functor" class="chapter  " data-progress="4.2" style="left: 50%;"></a>
    
        <a href="./Scalaz.html" title="Scalaz" class="chapter  new-chapter" data-progress="5" style="left: 52.77777777777778%;"></a>
    
        <a href="./Utils.html" title="Utils" class="chapter  " data-progress="5.1" style="left: 55.55555555555556%;"></a>
    
        <a href="./Tag Types.html" title="Tag Types" class="chapter  " data-progress="5.2" style="left: 58.333333333333336%;"></a>
    
        <a href="./Memoization.html" title="Memoization" class="chapter  " data-progress="5.3" style="left: 61.111111111111114%;"></a>
    
        <a href="./Failure.html" title="Failure" class="chapter  new-chapter" data-progress="6" style="left: 63.888888888888886%;"></a>
    
        <a href="./Collections.html" title="Collections" class="chapter  " data-progress="6.1" style="left: 66.66666666666667%;"></a>
    
        <a href="./Object Init.html" title="Object Init" class="chapter  " data-progress="6.2" style="left: 69.44444444444444%;"></a>
    
        <a href="./Implicit.html" title="Implicit" class="chapter  " data-progress="6.3" style="left: 72.22222222222223%;"></a>
    
        <a href="./macros/README.html" title="Macros" class="chapter  new-chapter" data-progress="7" style="left: 75%;"></a>
    
        <a href="./macros/macro_types.html" title="Macro Types" class="chapter  " data-progress="7.1" style="left: 77.77777777777777%;"></a>
    
        <a href="./macros/macro_basics.html" title="Macro Basics" class="chapter  " data-progress="7.2" style="left: 80.55555555555556%;"></a>
    
        <a href="./macros/context.html" title="Context" class="chapter  " data-progress="7.3" style="left: 83.33333333333333%;"></a>
    
        <a href="./macros/fun_with_println.html" title="Fun with println" class="chapter  " data-progress="7.4" style="left: 86.11111111111111%;"></a>
    
        <a href="./macros/scala_version_differences.html" title="Scala Version Differences" class="chapter  " data-progress="7.5" style="left: 88.88888888888889%;"></a>
    
        <a href="./macros/quasiquotes.html" title="Quasiquotes" class="chapter  " data-progress="7.6" style="left: 91.66666666666667%;"></a>
    
        <a href="./macros/trees.html" title="Trees" class="chapter  " data-progress="7.7" style="left: 94.44444444444444%;"></a>
    
        <a href="./macros/tree_lens.html" title="Tree Lens" class="chapter  " data-progress="7.8" style="left: 97.22222222222223%;"></a>
    
        <a href="./References.html" title="References" class="chapter  new-chapter" data-progress="8" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_22">
                    
                        <h1 id="traits">Traits</h1>
<p>To the average java programmer, traits are fancy interfaces with defaults (java 8!).  But in scala traits are far more powerful than java 8&#39;s interface with default.  Lets start exploring the power of traits.</p>
<p>Simple trait; same as interface</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Foo</span> {</span>
    <span class="hljs-keyword">def</span> foo: String
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Foo</span> {</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">foo</span>();
}
</code></pre>
<p>Nothing fancy here.  They both seem to be the same thing, and thats because they are.  Lets look at javap for the scala output.</p>
<pre><code class="lang-scala">scala&gt; :javap Foo
Compiled from <span class="hljs-string">"&lt;console&gt;"</span>
public interface Foo{
    public <span class="hljs-keyword">abstract</span> java.lang.String foo();
}
</code></pre>
<p>So whats the big deal?  Traits start to differ from interfaces with defaults when you start defining implementations.  Lets look at defining behavior.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">def</span> bar: String
    <span class="hljs-keyword">def</span> echo = println(bar)
}
</code></pre>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">bar</span>();
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>()  {
        System.out.println(<span class="hljs-keyword">this</span>.bar())
    }
}
</code></pre>
<p>This looks very similar, but there is one big difference between the two: java&#39;s block goes away if overriden, scala&#39;s implementation of this uses a utility class to store the implementation.  This utility class can be reused and mixed into your code however you wish.  Lets take a look at the generated code from scala.</p>
<pre><code class="lang-scala">scala&gt; :javap -p Bar
Compiled from <span class="hljs-string">"&lt;console&gt;"</span>
public interface Bar{
    public <span class="hljs-keyword">abstract</span> java.lang.String bar();
    public <span class="hljs-keyword">abstract</span> void echo();
}
</code></pre>
<p>Bar looks the same as before, but now there is a new utility class generated: <code>Bar$class</code>.</p>
<pre><code class="lang-scala">scala&gt; :javap -p Bar$<span class="hljs-keyword">class</span>
Compiled from <span class="hljs-string">"&lt;console&gt;"</span>
public <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bar</span>$<span class="hljs-title">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">java</span>.<span class="hljs-title">lang</span>.<span class="hljs-title">Object</span>{</span>
    public static void echo(Bar);
    public static void $init$(Bar);
}
</code></pre>
<p>The <code>Bar$class</code> generated is a class with only static methods defined from the trait.  If a class extends the trait, it would look like the following.</p>
<pre><code class="lang-java"><span class="hljs-comment">// couldn't find a way to do this in scala (scala cant find the type), so doing it in java</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">bar</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"bar"</span>
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>()  {
        Bar$class.echo(<span class="hljs-keyword">this</span>);
    }
}
</code></pre>
<p>Because code reuse of defaults is something that is desired, it is recommended to use static methods in default blocks.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bars</span> {</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title">Bar</span>() {}

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>(Bar bar) {
        System.out.println(bar);
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">bar</span>();
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>()  {
        Bars.echo(<span class="hljs-keyword">this</span>);
    }
}
</code></pre>
<p>By doing the above, you get the same generated code that scala has (s/s/$class/).  So great, we have the same thing right?  Lets try mixing different behaviors together.</p>
<h2 id="mixins">Mixins</h2>
<p>In the java 8 based world, if you have the interface <code>Bar</code> and you want to add in new functionality, its up to you to define how thats done.  Lets try making echo use default echo and a logger echo.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>() {
        Bars.echo(<span class="hljs-keyword">this</span>);
        Bars.log(<span class="hljs-keyword">this</span>);
    }
}
</code></pre>
<p>This seems ok, but to the consumer of <code>MyBar</code>, he/she won&#39;t know what is happening or that <code>MyBar</code> has done this.  Scala&#39;s view of how to do this comes from a common thought in functional programming; types should reflect what happened.  What does it mean in this context?  Well, in normal scala code you won&#39;t see the above often (implement an interface and mix in multiple behaviors).  Instead you will see a powerful feature of scala; trait mixins. A mixin is a trait that adds or enhance functionality on the type its been mixed into; types should describe whats going on.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">BarLogger</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">def</span> echo = {
        <span class="hljs-keyword">super</span>.echo
        println(s<span class="hljs-string">"[LOGGER]: $bar"</span>)
    }
}
</code></pre>
<p>Here we have a new type <code>BarLogger</code> that will enhance the <code>echo</code> method of <code>Bar</code>.  Now lets mix these two together.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BarWorld</span><span class="hljs-params">(bar: String)</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bar</span> <span class="hljs-keyword">with</span> <span class="hljs-title">BarLogger</span></span>
BarWorld(<span class="hljs-string">"world"</span>).echo
world
[LOGGER]: world
</code></pre>
<p>With this, we are saying that <code>BarWorld</code> has type <code>Bar with BarLogger</code>.  We are using the type system to explain what the behavior of <code>BarWorld</code> will be.  In this example <code>BarLogger</code> is decorating the <code>Bar</code> with new behavior.</p>
<p>In java 8, default interfaces are just interfaces, so couldn&#39;t I do the same?</p>
<pre><code class="lang-java">class BarWorld implements Bar, BarLogger {
    <span class="hljs-keyword">public</span> String <span class="hljs-title">bar</span>() { <span class="hljs-keyword">return</span> <span class="hljs-string">"bar"</span>; }
}
</code></pre>
<p>The code above won&#39;t compile.</p>
<pre><code class="lang-java">java: class BarWorld inherits unrelated defaults <span class="hljs-keyword">for</span> echo() from types Bar and BarLogger
</code></pre>
<p>Java&#39;s view of mixins are over disjoin behaviors and not over similar behaviors.  In cases like this, its up to the developer to solve what the behavior should be.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Bar</span>, <span class="hljs-title">BarLogger</span> {</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">echo</span>() {
        Bars.echo(<span class="hljs-keyword">this</span>);
        Bars.log(<span class="hljs-keyword">this</span>);
    }
}
</code></pre>
<p>If we are mixing traits together to compose a new type, how does scala know what the end behavior should be?  Scala defines a simple rule for how to know what the behavior should be (and if it gets it wrong, just override it): apply from right to left.  Lets show a few examples.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Echoable</span> {</span>
    <span class="hljs-keyword">def</span> echo: Unit
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">One</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Echoable</span> {</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">def</span> echo = println(<span class="hljs-string">"one"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Two</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Echoable</span> {</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">def</span> echo = println(<span class="hljs-string">"two"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Three</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Echoable</span> {</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">def</span> echo = println(<span class="hljs-string">"three"</span>)
}
</code></pre>
<p>Here we define three top level traits <code>One</code>, <code>Two</code>, and <code>Three</code> that all extend from <code>Echoable</code>.  Each one <code>override</code>s the <code>echo</code> method to be a different behavior.  Lets see how scala&#39;s right to left rule picks the behavior we want.</p>
<pre><code class="lang-scala">(<span class="hljs-keyword">new</span> Three <span class="hljs-keyword">with</span> Two <span class="hljs-keyword">with</span> One).echo
<span class="hljs-comment">// one</span>

(<span class="hljs-keyword">new</span> One <span class="hljs-keyword">with</span> Three <span class="hljs-keyword">with</span> Two).echo
<span class="hljs-comment">// two</span>

(<span class="hljs-keyword">new</span> Two <span class="hljs-keyword">with</span> One <span class="hljs-keyword">with</span> Three).echo
<span class="hljs-comment">// three</span>
</code></pre>
<p>As we see here, the trait defined right most is the one that wins.  In traits, the <code>override</code> keyword annotations that this trait defines a fully implementation of a method, and to use it rather than using <code>super.echo</code>.  So what if we didn&#39;t define <code>override</code>?</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Printable</span> {</span>
    <span class="hljs-keyword">def</span> print: Unit
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">P1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Printable</span> {</span>
    <span class="hljs-keyword">def</span> print = println(<span class="hljs-string">"one"</span>)
}

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">P2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Printable</span> {</span>
    <span class="hljs-keyword">def</span> print = println(<span class="hljs-string">"two"</span>)
}

(<span class="hljs-keyword">new</span> P1 <span class="hljs-keyword">with</span> P2).print
&lt;console&gt;:<span class="hljs-number">11</span>: error: &lt;$anon: P1 <span class="hljs-keyword">with</span> P2&gt; inherits conflicting members:
  method print in <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">P1</span> <span class="hljs-title">of</span> <span class="hljs-title">type</span> =&gt; <span class="hljs-title">Unit</span>  <span class="hljs-title">and</span></span>
  method print in <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">P2</span> <span class="hljs-title">of</span> <span class="hljs-title">type</span> =&gt; <span class="hljs-title">Unit</span></span>
(Note: <span class="hljs-keyword">this</span> can be resolved by declaring an <span class="hljs-keyword">override</span> in &lt;$anon: P1 <span class="hljs-keyword">with</span> P2&gt;.)
              (<span class="hljs-keyword">new</span> P1 <span class="hljs-keyword">with</span> P2).print
                   ^
</code></pre>
<p>As we see above, the behavior is the same as java&#39;s (but with a weirder error message).  If the user adds traits that conflict with an implementation and don&#39;t annotate how to resolve conflicts, then scala will expect the user to resolve the conflict.</p>
<p>So what was that <code>abstract override</code> we saw before?  Lets go over an example to explain it; filtering out the bad word &quot;java&quot;.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Speaker</span> {</span>
    <span class="hljs-keyword">def</span> say(word: String) = println(word)
}

<span class="hljs-keyword">new</span> Speaker(){}.say(<span class="hljs-string">"Are you a java developer!?!"</span>)
Are you a java developer!?!
</code></pre>
<p>In this case we are going to say that &quot;java&quot; is a bad word.  So lets filter it out and convert it to <code>j***</code>.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">JavaFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Speaker</span> {</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">def</span> say(word: String) = <span class="hljs-keyword">super</span>.say(word.replace(<span class="hljs-string">"java"</span>, <span class="hljs-string">"j***"</span>))
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Teacher</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Speaker</span> <span class="hljs-keyword">with</span> <span class="hljs-title">JavaFilter</span></span>

<span class="hljs-keyword">val</span> speaker = <span class="hljs-keyword">new</span> Teacher()
speaker.say(<span class="hljs-string">"Are you a java developer!?!"</span>)
<span class="hljs-comment">// Are you a j*** developer!?!</span>

speaker.say(<span class="hljs-string">"Are you a JAVA developer!?!"</span>)
<span class="hljs-comment">// Are you a JAVA developer!?!</span>
</code></pre>
<p>The <code>abstract override</code> annotation says that this implementation relies on other implementations in the trait hierarchy.  The trait now has access to <code>super</code> (you won&#39;t have access to super without it) and lets you control how to decorate the method.  Thats really what <code>abstract override</code> tries to do, let traits decorate other traits.  In a java based world, the decorator pattern is normally implemented by a wrapper object that will do some logic than delegate to the wrapped object.  In scala the same thing can be done at the trait level and normally is (types defining behavior).</p>
<h2 id="self-">Self =&gt;</h2>
<p>Now that we see that traits can be mixed into other traits to create new behaviors, is there any way to say that a trait depends on another trait without extending it?   What about controlling the type of <code>this</code>?  This is where <code>self =&gt;</code> comes in; self is the object implementing the trait, and as with other objects we can say what the type is.</p>
<p>Simple case, just defining self reference</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Foo</span> {</span> self =&gt;
    <span class="hljs-keyword">def</span> doWork: Unit
}
</code></pre>
<p>Defining self&#39;s type</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Bar</span> {</span> self: Foo =&gt;
    <span class="hljs-keyword">def</span> doMoreWork: Unit = self.doWork
}
<span class="hljs-comment">// don't have to use self within the code</span>
<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Bar2</span> {</span> self: Foo =&gt;
    <span class="hljs-keyword">def</span> doMoreWork: Unit = doWork
}
</code></pre>
<p>Defining intersection types.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Biz</span> {</span> self: Bar <span class="hljs-keyword">with</span> Foo =&gt;
    <span class="hljs-keyword">def</span> doEvenMoreWork = {
        self.doWork
        self.doMoreWork
    }
}
</code></pre>
<p>As we see, we can define the type we expect self to be in.  Lets take a closer look at the <code>Bar</code> example.  Here we define that the object implementing <code>Bar</code> must have also added the type <code>Foo</code> to itself.</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Baz</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">with</span> <span class="hljs-title">Bar</span> {</span>
    <span class="hljs-keyword">def</span> doWork = println(<span class="hljs-string">"baz"</span>)
}
Baz.doMoreWork
<span class="hljs-comment">// baz</span>
</code></pre>
<p>If the user doesn&#39;t mixin <code>Foo</code> the compiler will reject the type.</p>
<pre><code class="lang-scala">object Baz2 extends Bar {
    def doWork = println("baz")
}
&lt;console&gt;:62: error: illegal inheritance;
 self-type Baz2.type does not conform to Bar's selftype Bar with Foo
       object Baz2 extends Bar {
                           ^
</code></pre>
<p>The question you might be wondering at this point is &quot;how is this different than just extending?&quot;  Right now we have shown that there really isn&#39;t any difference, but what each implies is infact different.  In the above case of <code>Bar</code>, we are really saying that <code>Bar</code> &quot;requires&quot; <code>Foo</code> and adds a method <code>doMoreWork</code> but does not define method <code>doWork</code>.  If <code>Bar</code> extended <code>Foo</code>, then it would be saying that <code>Bar</code> adds methods <code>doWork</code> and <code>doMoreWork</code>.  Self really lets you define a traits dependencies.  Lets try to explore this abit more.</p>
<h3 id="mixin-to-predefined-classes">Mixin to predefined classes</h3>
<p>Traits are like interfaces in that they can&#39;t construct a object on its own.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> java.util.Properties

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">MyProperties</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Properties</span></span>

<span class="hljs-keyword">new</span> MyProperties
&lt;console&gt;:<span class="hljs-number">61</span>: error: <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">MyProperties</span> <span class="hljs-title">is</span> <span class="hljs-title">abstract</span>; <span class="hljs-title">cannot</span> <span class="hljs-title">be</span> <span class="hljs-title">instantiated</span></span>
              <span class="hljs-keyword">new</span> MyProperties
                            ^
</code></pre>
<p>As we see here, traits can extend classes, so can we hack java to let a class extend two classes?</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> java.util.HashMap

<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">MyHashMap</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HashMap</span>[<span class="hljs-title">String</span>, <span class="hljs-title">String</span>]</span>

<span class="hljs-class"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MyHashMap</span> <span class="hljs-keyword">with</span> <span class="hljs-title">MyProperties</span></span>
&lt;console&gt;:<span class="hljs-number">64</span>: error: illegal inheritance; <span class="hljs-keyword">super</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HashMap</span></span>
 is not a sub<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">of</span> <span class="hljs-title">the</span> <span class="hljs-title">superclass</span> <span class="hljs-title">Properties</span></span>
 of the mixin <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">MyProperties</span></span>
       <span class="hljs-class"><span class="hljs-keyword">case</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MyHashMap</span> <span class="hljs-keyword">with</span> <span class="hljs-title">MyProperties</span></span>
                                                 ^
</code></pre>
<p>Seems like no; if we extend a class, then a trait acts more like an abstract class.  This is to be expected since the JVM doesn&#39;t allow this.</p>
<p>Now lets take this idea but add new functionality for properties.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> java.util.Properties
<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ScalaProperty</span> {</span> self: Properties =&gt;
    <span class="hljs-keyword">def</span> apply(key: String): Option[String] = Option(self.getProperty(key))
}
</code></pre>
<p>Here we define a trait that depends on properties (<code>self: Properties =&gt;</code>) and adds a method apply to it.  Lets use it</p>
<pre><code class="lang-scala"><span class="hljs-keyword">val</span> prop = <span class="hljs-keyword">new</span> Properties <span class="hljs-keyword">with</span> ScalaProperty
prop(<span class="hljs-string">"missing"</span>)
<span class="hljs-comment">// None</span>
</code></pre>
<p>Trait mixins are a way to add new behavior to existing types.  This can be done when defining a class or creating a new instance of a class.  We could do the same with extends, but from the usage perspective its weird.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> java.util.Properties
<span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">ScalaProperty</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Properties</span> {</span> 
    <span class="hljs-keyword">def</span> apply(key: String): Option[String] = Option(<span class="hljs-keyword">this</span>.getProperty(key))
}
<span class="hljs-keyword">val</span> prop = <span class="hljs-keyword">new</span> Properties <span class="hljs-keyword">with</span> ScalaProperty
prop(<span class="hljs-string">"missing"</span>)
<span class="hljs-comment">// None</span>
</code></pre>
<p>In the example, extends and self will be used the same way but its weird in the fact that in the first case we are saying <code>ScalaProperty</code> depends on <code>Properties</code> but in the second case we are saying it is-a <code>Properties</code>.  If <code>ScalaProperty</code> is-a <code>Properties</code> then mixing it into a properties at creation time is different than how you normally deal with is-a relationships.</p>
<p>Self is much more flexible than extends, namely because self is defining what dependencies the trait has.  This can be very helpful for modeling since we can keep the is-a relationships clean and mixin useful functionality without polluting the hierarchy.</p>
<p>So would we ever want to use extends?  YES!  Look at collections apis for a great example of when to use extends; <code>List</code> is <code>Iterable</code> and <code>TraversableOnce</code>.  If the user had to always create a new list and mix in these traits, the api would be hard to use.  Second off, it would require that the user calls new since you can only mixin at object creation time, aka new.</p>
<pre><code class="lang-scala">List(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-keyword">with</span> Foo
&lt;console&gt;:<span class="hljs-number">1</span>: error: <span class="hljs-string">';'</span> expected but <span class="hljs-string">'with'</span> found.
       List(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-keyword">with</span> Foo
                     ^
</code></pre>
<p>So when picking self vs extends, ask yourself is the functionality being added needed for almost all instances?  Is the functionality a product of the type or just a utility? Do you own the implementation?  Are there conflicting functionalities that you want to define?</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./Language.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./Partial Function.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
